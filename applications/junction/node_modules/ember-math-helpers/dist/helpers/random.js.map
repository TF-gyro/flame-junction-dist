{"version":3,"file":"random.js","sources":["../../src/helpers/random.ts"],"sourcesContent":["import { isArray } from '@ember/array';\nimport { helper } from '@ember/component/helper';\n\nexport interface RandomSignature {\n  Args: {\n    Named: { decimals?: number };\n    Positional: [upperBound?: number, lowerBound?: number];\n  };\n  Return: number;\n}\n\nconst { min, max } = Math;\n\n// @see: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed#max(0, min(MAX_DECIMALS, decimals))));\nconst MAX_DECIMALS = 20;\n\n// ðŸ’¡ Using Number.toFixed, we'll get rounding for free alongside\n// decimal precision. We'll default to whole-number rounding simply\n// by defaulting `decimals` to 0\nconst DEFAULT_OPTS = {\n  decimals: 0,\n};\n\n/**\n * Executes `Math.random` with the provided upper-bounded randoms, lower- and upper-bounded randoms,\n * and the option to configure decimal precision.\n *\n * ```hbs\n * {{random}} or {{random decimals=4}}\n * ```\n *\n * ```hbs\n * {{random 42}} or {{random 42 decimals=4}}\n * ```\n *\n * ```hbs\n * {{random 21 1797}} or {{random 21 1797 decimals=4}}\n * ```\n *\n * @function random\n * @param {number} upperBound\n * @param {number} lowerBound\n * @param {object} named The set of named arguments, currently just `decimals`.\n * @param {number} [named.decimals] An optional decimal precision value.\n * @return {number} The random generated number\n */\nexport function random(\n  params:\n    | RandomSignature['Args']['Named']\n    | RandomSignature['Args']['Positional'],\n  { decimals }: RandomSignature['Args']['Named'] = DEFAULT_OPTS,\n) {\n  // no positional args, but only an options hash from named args\n  if (typeof params === 'object' && !isArray(params)) {\n    decimals =\n      typeof params.decimals !== 'undefined'\n        ? params.decimals\n        : DEFAULT_OPTS.decimals;\n\n    return +Math.random().toFixed(max(0, min(MAX_DECIMALS, decimals)));\n  }\n\n  // one positional arg: treat it as an upper bound\n  if (params && params.length === 1) {\n    const [upperBound] = params;\n\n    if (typeof upperBound === 'number') {\n      return +(Math.random() * upperBound).toFixed(\n        max(0, min(MAX_DECIMALS, decimals ?? 0)),\n      );\n    }\n  }\n\n  // two positional args: use them to derive upper and lower bounds\n  if (params && params.length === 2) {\n    let [lowerBound, upperBound] = params;\n\n    if (typeof upperBound === 'number' && typeof lowerBound === 'number') {\n      // for convenience, swap if a higher number is accidentally passed first\n      if (upperBound < lowerBound) {\n        [lowerBound, upperBound] = [upperBound, lowerBound];\n      }\n\n      return +(lowerBound + Math.random() * (upperBound - lowerBound)).toFixed(\n        max(0, min(MAX_DECIMALS, decimals ?? 0)),\n      );\n    }\n  }\n\n  // no positional or named args: just return Math.random() w/ default decimal precision\n  return +Math.random().toFixed(max(0, min(MAX_DECIMALS, decimals ?? 0)));\n}\n\nexport default helper<RandomSignature>(random);\n"],"names":["min","max","Math","MAX_DECIMALS","DEFAULT_OPTS","decimals","random","params","isArray","toFixed","length","upperBound","lowerBound","helper"],"mappings":";;;AAWA,MAAM;EAAEA,GAAG;AAAEC,EAAAA;AAAI,CAAC,GAAGC,IAAI;;AAEzB;AACA,MAAMC,YAAY,GAAG,EAAE;;AAEvB;AACA;AACA;AACA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,QAAQ,EAAE;AACZ,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,MAAMA,CACpBC,MAEyC,EACzC;AAAEF,EAAAA;AAA2C,CAAC,GAAGD,YAAY,EAC7D;AACA;EACA,IAAI,OAAOG,MAAM,KAAK,QAAQ,IAAI,CAACC,OAAO,CAACD,MAAM,CAAC,EAAE;AAClDF,IAAAA,QAAQ,GACN,OAAOE,MAAM,CAACF,QAAQ,KAAK,WAAW,GAClCE,MAAM,CAACF,QAAQ,GACfD,YAAY,CAACC,QAAQ;IAE3B,OAAO,CAACH,IAAI,CAACI,MAAM,EAAE,CAACG,OAAO,CAACR,GAAG,CAAC,CAAC,EAAED,GAAG,CAACG,YAAY,EAAEE,QAAQ,CAAC,CAAC,CAAC;AACpE;;AAEA;AACA,EAAA,IAAIE,MAAM,IAAIA,MAAM,CAACG,MAAM,KAAK,CAAC,EAAE;AACjC,IAAA,MAAM,CAACC,UAAU,CAAC,GAAGJ,MAAM;AAE3B,IAAA,IAAI,OAAOI,UAAU,KAAK,QAAQ,EAAE;MAClC,OAAO,CAAC,CAACT,IAAI,CAACI,MAAM,EAAE,GAAGK,UAAU,EAAEF,OAAO,CAC1CR,GAAG,CAAC,CAAC,EAAED,GAAG,CAACG,YAAY,EAAEE,QAAQ,IAAI,CAAC,CAAC,CACzC,CAAC;AACH;AACF;;AAEA;AACA,EAAA,IAAIE,MAAM,IAAIA,MAAM,CAACG,MAAM,KAAK,CAAC,EAAE;AACjC,IAAA,IAAI,CAACE,UAAU,EAAED,UAAU,CAAC,GAAGJ,MAAM;IAErC,IAAI,OAAOI,UAAU,KAAK,QAAQ,IAAI,OAAOC,UAAU,KAAK,QAAQ,EAAE;AACpE;MACA,IAAID,UAAU,GAAGC,UAAU,EAAE;QAC3B,CAACA,UAAU,EAAED,UAAU,CAAC,GAAG,CAACA,UAAU,EAAEC,UAAU,CAAC;AACrD;AAEA,MAAA,OAAO,CAAC,CAACA,UAAU,GAAGV,IAAI,CAACI,MAAM,EAAE,IAAIK,UAAU,GAAGC,UAAU,CAAC,EAAEH,OAAO,CACtER,GAAG,CAAC,CAAC,EAAED,GAAG,CAACG,YAAY,EAAEE,QAAQ,IAAI,CAAC,CAAC,CACzC,CAAC;AACH;AACF;;AAEA;EACA,OAAO,CAACH,IAAI,CAACI,MAAM,EAAE,CAACG,OAAO,CAACR,GAAG,CAAC,CAAC,EAAED,GAAG,CAACG,YAAY,EAAEE,QAAQ,IAAI,CAAC,CAAC,CAAC,CAAC;AACzE;AAEA,eAAeQ,MAAM,CAAkBP,MAAM,CAAC;;;;"}